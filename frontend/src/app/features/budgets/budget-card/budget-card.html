<div
  class="bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-2 border border-gray-100 group"
>
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-2">
      <span class="px-3 py-1 rounded-full text-xs font-semibold" [class]="getStatusBadgeClass()">
        {{ budget().is_active ? 'Activo' : 'Inactivo' }}
      </span>
    </div>
    <div class="flex items-center gap-1 text-gray-500">
      <i-lucide [img]="Calendar" class="w-4 h-4"></i-lucide>
      <span class="text-sm">{{ getPeriodLabel() }}</span>
    </div>
  </div>

  <div class="text-center mb-6">
    <div class="flex items-center justify-center gap-2 mb-2">
      <i-lucide [img]="DollarSign" class="w-6 h-6 text-emerald-600"></i-lucide>
      <span class="text-3xl font-bold text-gray-900">
        ${{ budget().amount | number: '1.2-2' }}
      </span>
    </div>
    <p class="text-sm text-gray-600">Límite {{ getPeriodLabel().toLowerCase() }}</p>
  </div>

  <div class="mb-4">
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm font-medium text-gray-700">Progreso</span>
      <span class="text-sm text-gray-500">{{ getProgressPercentage() }}%</span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-2">
      <div
        class="h-2 rounded-full transition-all duration-300"
        [class]="getProgressBarClass()"
        [style.width.%]="getProgressPercentage()"
      ></div>
    </div>
    <div class="flex items-center justify-between mt-1">
      <span class="text-xs text-gray-500">
        Gastado: ${{ getSpentAmount() | number: '1.2-2' }}
      </span>
      <span class="text-xs text-gray-500">
        Restante: ${{ getRemainingAmount() | number: '1.2-2' }}
      </span>
    </div>
  </div>

  <div class="mb-4 p-3 bg-gray-50 rounded-lg">
    <div class="flex items-center justify-between text-sm">
      <span class="text-gray-600">Período:</span>
      <span class="font-medium text-gray-900">
        {{ formatDate(budget().start_date) }} -
        {{ formatDate(budget().end_date) }}
      </span>
    </div>
  </div>

  @if (getProgressPercentage() > 90) {
    <div class="mb-4 p-2 bg-red-50 rounded-lg flex items-center gap-2">
      <i-lucide [img]="TriangleAlert" class="w-4 h-4 text-red-500"></i-lucide>
      <span class="text-sm text-red-700">
        {{ getProgressPercentage() >= 100 ? 'Presupuesto excedido' : 'Cerca del límite' }}
      </span>
    </div>
  }

  <div class="flex gap-2">
    <button
      (click)="onEdit()"
      class="flex-1 px-4 py-2 text-sm font-medium text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1 transition-all duration-200 flex items-center justify-center gap-1"
    >
      <i-lucide [img]="Pencil" class="w-4 h-4"></i-lucide>
      Editar
    </button>
    <button
      (click)="onDelete()"
      class="flex-1 px-4 py-2 text-sm font-medium text-red-600 border border-red-200 rounded-lg hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1 transition-all duration-200 flex items-center justify-center gap-1"
    >
      <i-lucide [img]="Trash" class="w-4 h-4"></i-lucide>
      Eliminar
    </button>
  </div>
</div>
